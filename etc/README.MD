# **부록**  
# **데이터베이스 종류와 하이브**  
모바일에서는 SQLite와 하이브(Hive)를 클라이언트 사이드 데이터베이스로 주로 사용한다. 추가로 파이어스토어를 사용해서 
간단한 서버 사이드 NoSQL 데이터베이스 및 API를 구현하기도 한다. 18장에서는 SQLite를 드리프트 플러그인을 사용해서 다룬다. 
20장에서는 파이어베이스의 공식 플러그인을 사용해서 파이어스토어를 다룬다. SQLite와 하이브 중에는 SQLite가 사용법이 
조금 더 복잡하다. 하지만 플러터 생태계에서는 SQLite만큼 하이브 또한 큰 점유율을 유지하고 있다.  
  
# **하이브**  
하이브는 NoSQL 데이터베이스이면서 동시에 인메모리 데이터베이스다. 데이터를 파일에 저장하기 떄문에 앱의 생명주기와 
관계없이 데이터가 유지되지만 앱이 실행되는 순간 파일에 저장돼 있던 모든 데이터가 메모리에 올라오기 떄문에 빠른 속도를 
자랑한다. 하이브는 사용법이 크게 어려운 편이 아니다.  
  
1. 프로젝트를 생성한다.  
- 프로젝트 이름: hive_db_practice  
- 네이티브 언어: 코틀린  
  
2. pubspec.yaml에 하이브 관련 패키지들을 추가한다. 하이브는 코드 생성 기능을 지원하기 때문에 build_runner와 hive_generator 등 
코드 생성을 제공하는 플러그인도 추가해줘야 한다.  
  
pubspec.yaml 참고  
  
3. 하이브를 초기화한다. main() 함수에 하이브를 꼭 초기화해줘야지만 프로젝트에서 하이브를 사용할 수 있다.  
  
lib -> main.dart  
  
4. 하이브에는 박스라는 개념이 있다. SQL에서의 테이블처럼 똑같은 타입의 데이터를 모아두는 공간이다. 특정 데이터를 저장하고 
다루기 위해서는 박스를 열어야 한다. 박스를 열 때는 어떤 타입의 데이터를 저장할지 박스의 이름을 지정해주면 된다.  
   
lib -> main.dart  
  
String 타입을 저장할 student_name이라는 명칭을 갖는 박스를 연다. 이 박스에 접근할 때는 student_name이라는 명칭을 
사용하면 되고 String 타입만 저장할 수 있다.  
  
5. student_name 박스에 학생 이름을 입력한다. openBox() 함수를 실행해서 반환받는 박스에 add() 함수를 실행해서 값을 
추가할 수 있다.  
  
lib -> main.dart  
  
add() 함수를 이용해서 박스에 값을 추가하면 자동으로 키값이 배정된다. 박스의 toMap() 함수를 실행하면 박스의 키와 값을 
Map 형태로 반환받을 수 있다. 플러터 앱은 꼭 runApp() 함수가 있어야지만 작동하므로 runApp() 함수를 추가한다.  
  
6. 단순한 프리미티브(primitive) 타입이 아닌 클래스 형태의 데이터도 박스에 저장할 수 있다. Student라는 클래스를 생성해서 
박스에 저장할 형태를 만든다.  
  
lib -> model -> student.dart  
  
하이브에 저장될 모든 클래스는 HiveType 어노테이션을 사용해서 프로젝트에서 유일한 typeId를 지정해줘야 한다. 추후 클래스 
구조가 변경됐을 때 하이브는 typeId를 기반으로 변경된 클래스를 인식한다. 한 프로젝트 내에서 겹치지 않는 숫자이기만 하면 
된다. 하이브에 저장할 클래스의 모든 속성들은 클래스 내부에서 유일한 HiveField ID 값을 입력해줘야 한다. HiveType의 
typeId처럼 추후 필드가 변경됐을 때 Hive에서는 HiveField ID값을 기반으로 변경된 필드를 인식한다. 클래스 내부에서 
유일한 값을 지정만 해주면 된다.  
  
7. 터미널 또는 커맨드에서 flutter pub run build_runner build를 실행해서 코드 생성을 진행한다.  
  
8. 클래스 타입의 데이터도 사실상 프리미티브 타입의 데이터를 저장하는 것과 방법이 같다. 약간의 다른 점이 있다면 어댑터를 
등록해줘야 한다. 하이브에서 제공하는 registerAdapter() 함수로 쉽게 어댑터를 등록할 수 있다.  
  
lib -> main.dart  
  
프리미티브 타입을 저장할 때와 유일하게 다른 점이다. flutter pub run build_runner build를 실행해서 생성된 StudenAdapter
를 하이브에 등록한다.  
  
하이브의 box 객체에는 add() 함수 외에도 여러 가지 기능을 함수로 제공해준다.  
  
![img.png](image/img.png)  
![img.png](image/img2.png)  
  
