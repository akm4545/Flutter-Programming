# **오늘도 출첵(구글 지도, Geolocator 플러그인, 다이얼로그)**  
# **프로젝트 구상하기**  
이번 프로젝트에서 가장 집중할 핵심 요소는 지도 기반 위치 서비스이다. 오늘도 출첵은 정해둔 특정 위치의 위도, 경도부터 
100미터 이내에서 출근 체크 기능을 제공하는 앱이다. 우선 구글 클라우드 플랫폼 콘솔에서 API 키를 발급받고 구글 지도 API를 
사용해서 회사 건물 위치, 출근 가능 영역 그리고 현재 나의 위치를 지도 위에 표현한다. 마지막으로 건물 위치와 내 현재 
위치가 몇 미터가 떨어져 있는지 계산해서 출근 체크를 할 수 있는 거리인지 확인하는 기능도 구현한다.  
  
# **사전 지식**  
# **Geolocator 플러그인**  
Geolocator 플러그인은 지리와 관련된 기능을 쉽게 사용할 수 있는 플러그인이다. Geolocator 기능은 크게 세 가지다. 
첫 번째로 위치 서비스를 사용할 수 있는 권한이 있는지 확인하고 권한을 요청한다. 두 번쨰로 현재 GPS 위치가 바뀔 때마다 
현재 위칫값을 받을 수 있는 기능을 사용한다. 마지막으로 현재 위치와 회사 건물 간의 거리를 계산한다.  
  
# **위치 서비스 권한 확인하기**  
위치 서비스를 사용할 수 있는 상태인지 파악하는 과정은 2단계이다. 첫 번째로 기기의 위치 서비스가 활성화되어 있는지 확인해야 
한다. 기기에서 위치 서비스를 꺼놓았다면 앱에서 위치 서비스에 대한 권한이 있더라도 위치 서비스 기능을 사용할 수 없다. 
두 번째로 앱에서 위치 서비스 권한을 요청하고 허가받아야 한다. 기기의 위치 서비스 기능이 켜졌더라도 안드로이드와 iOS는 
유저로부터 앱에서 위치 서비스 권한을 직접 허가받고 사용하도록 설계되어 있다.  
  
기기의 위치 서비스 기능이 켜졌는지 확인하는 데 isLocationServiceEnabled() 함수를 사용하면 된다. boolean 값으로 
활성화되어 있으면 true, 아니면 false를 반환한다.  
  
![img.png](image/img.png)  
  
앱에서 위치 서비스 기능을 사용할 수 있는 상태인지 확인하는 데 checkPermission() 함수를 사용하면 된다. 만약에 권한이 
없다면 requestPermission() 함수를 사용해서 권한을 요청할 수 있다. 두 함수 모두 LocationPermission enum을 반환해주며 
5가지 값 중 하나를 반환받을 수 있다.  
  
![img.png](image/img2.png)  
  
![img.png](image/img3.png)  

# **현재 위치 지속적으로 반환받기**  
Geolocator 플러그인의 getPositionStream() 함수를 사용하면 현재 위치가 변경될 때마다 현재 위칫값을 Position 클래스 
형태로 주기적으로 반환받을 수 있다.  
  
![img.png](image/img4.png)  
  
![img.png](image/img5.png)  
  
