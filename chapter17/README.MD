# **일정 관리 앱 만들기(table_calendar)**  
# **프로젝트 구상하기**  
이 프로젝트는 크게 위젯 두 개로 구분할 수 있다. 일정 데이터를 조회하고 조회할 날짜를 선택하는 홈 스크린과 일정을 추가하는 
일정 추가 화면이다. 먼저 홈 스크린에서 달력 형태의 위젯을 구현하고 바로 아래에 일정을 리스트로 보여준다. 다음으로 
일정 추가 버튼을 플로팅 액션 버튼으로 구현한 다음 눌렀을 때 일정 추가 화면이 보이게 한다. 마지막으로 일정 정보를 입력하는 
텍스트 필드와 저장 버튼을 구현한다.  
  
![img.png](image/img.png)  
  
# **사전 지식**  
# **table_calendar 플러그인**  
이번에 사용해볼 table_calendar는 달력을 쉽게 구현할 수 있도록 해주는 플러그인이다. 직접 달력을 구현할 수도 있겠지만 
그럴 경우 상당한 시간이 소요될 가능성이 매우 높다. 그렇기 떄문에 잘 개발되어 있는 오픈 소스를 이용해서 달력 기능을 구현한다.  
  
달력 플러그인은 특정 날짜 선택하기, 날짜 기간 선택하기, 현재 화면에 보여지는 날짜 지정하기, 일정 입력하기 등 기능을 
제공해준다. 그리고 매우 유연한 디자인 기능을 노출하고 있어서 달력 플러그인의 거의 모든 요소를 직접 최적화할 수 있다. 
간단한 샘플 코드를 이용해서 대표적으로 사용되는 달력 플러그인의 매개변수들을 알아보자.  
  
![img.png](image/img2.png)  
![img.png](image/img3.png)  
  
1번은 현재 포커스된 날짜를 지정할 수 있다. 포커스된 날짜는 현재 화면에 보이는 날짜를 의미한다. 예를 들어 11월 23일이 
지정되었다며 화면에 11월 달력이 보인다. 2번은 달력의 가장 첫 번째 날짜이다. 지정된 날짜보다 이전 날짜는 조회할 수 없다. 
3번은 달력의 가장 마지막 날짜이다. 지정된 날짜의 이후 날짜는 조회할 수 없다. 4번은 달력에 표시되는 '선택된 날짜'를 
어떤 날짜로 지정할지 로직을 작성할 수 있다. DateTime day 매개변수는 현재 화면에 보이는 날짜들을 하나씩 입력받고, 
true가 반환되면 해당 날짜가 선택된 날짜로 지정되고 false가 반환되면 선택되지 않은 날짜로 지정된다. 현재 날짜와 day 
매개변수가 같은 날짜인지 비교한 값을 반환하면 현재 날짜가 선택된 날짜로 지정된다.  
  
5번은 날짜가 선택됐을 때 실행되는 함수이다. seletedDay 매개변수는 선택된 날짜이고 focusedDay는 날짜가 선택된 순간에 
포커스돼 있는 날짜이다. 6번은 달력의 페이지가 변경될 때 마다 실행되는 함수이다. focusedDay 매개변수는 달력의 페이지가 
변경되며 새로 포커스된 날짜를 의미한다. 7번은 기간 선택 모드를 지정할 수 있으며 RangeSelectionMode.toggleOn과 
RangeSelectionModel.toggleOff가 존재한다. RangeSelectionModel.toggleOn을 입력해주면 단일 날짜 대신 날짜 기간을 
선택할 수 있다. 8번은 rangeSelectionMode 매개변수에 RangeSelectionModel.toggleOn이 설정됐을 때 실행되는 함수이다. 
start 매개변수는 선택한 기간의 시작 날짜를 의미하고 end 매개변수는 선택한 기간의 마지막 날짜를 의미한다. focusedDay는 
선택이 실행된 순가에 포커스된 날짜이다.  
  
# **사전 준비**  
1. 실습에 사용할 프로젝트를 생성한다.  
- 프로젝트 이름: calendar_scheduler  
- 네이티브 언어: 코틀린  
  
# **pubspec.yaml 설정하기**  
지금까지 플러그인을 추가할 때 pubspec.yaml 파일의 dependencies에 추가했다. 하지만 pubspec.yaml 파일에는 플러그인을 
추가할 수 있는 키값이 하나 더 있다. dev_dependencies이다. 여기에는 dependencies에 플러그인을 추가할 때처럼 똑같이 
플러그인을 추가할 수 있지만 근본적인 차이점이 있다. dependencies 키에 작성된 플러그인들은 앱에 함께 패키징되지만 
dev_dependdencies에 입력된 플러그인들은 개발할 때만 사용되고 앱과 함께 패키징되지는 않는다. 결론적으로 개발할 때만 
필요하고 앱을 실행할 때 필요 없는 플러그인을 dev_dependencies에 입력하면 된다.  
  
드리프트(Drift)는 클래스를 이용해서 SQLite 데이터베이스를 구현할 수 있는 플러그인이다. 직접 SQL 쿼리를 작성하지 않아도 
다트 언어로 데이터베이스 테이블과 쿼리를 구현하면 드리프트가 자동으로 쿼리를 생성해준다. 이렇게 자동으로 코드를 작성하는 
기능을 플러터에서는 코드 생성이라고 부른다. 코드 생성은 데이터베이스 관련 코드가 변경될 때마다 한 번씩만 실행해주면 되기 
때문에 앱과 함께 패키징될 필요가 없다. 개발할 때 코드 생성 기능을 사용해서 코드를 미리 생성한 후 배포하면 된다. 그렇기 
떄문에 실제 앱이 빌드될 때 함께 포함되지 않는 dev_dependencies에 드리프트 코드 생성 관련 플러그인들을 추가해야 한다.  
  
1. 코드 생성 기능을 제공하는 drift_dev와 build_runner를 dev_dependencies에 추가한다.  
  
pubspec.yaml 참고  
  
drift_dev는 Drift와 관련된 코드를 생성하는 로직이 작성되어 있는 플러그인이고 build_runner는 Code Generation을 
실행하는 명령어를 지원하는 플러그인이다.  
  
# **프로젝트 초기화하기**  
1. lib 폴더에 screen 폴더를 생성하고 앱의 기본 홈 화면으로 사용할 HomeScreen 위젯을 만들 home_screen.dart를 생성한다.  
  
lib -> screen -> home_screen.dart  
  
2. lib/main.dart 파일에서도 마찬가지로 HomeScreen을 홈 위젯으로 등록한다.  
  
lib -> main.dart  
  
# **레이아웃 구상하기**  
프로젝트를 본격적으로 시작하기에 앞서 프로젝트에서 사용할 색상들을 한 파일에 정리한다. 그다음 HomeScreen 그리고 
CreateScheduleBottomSheet 순서로 구상한다.  
  
# **홈 스크린**  
홈 스크린은 달력과 리스트로 2등분된 형태이다. 달력에서 특정 날짜를 선택하면 날짜에 해당되는 달력 아래에 일정 리스트가 
나타난다. 일정은 시작 시간 기준으로 오름차순 정렬된다. 달력과 리스트 사이에는 선택된 날짜와 날짜에 해당되는 일정이 몇 
개 있는지 보여주는 배너가 있다. 마지막으로 플로팅 액션 버튼으로 구현한 일정 추가 버튼이 있다. 이 버튼을 누르면 새로운 
일정을 생성하는 화면을 띄울 수 있다.  
  
![img.png](image/img4.png)  
  



