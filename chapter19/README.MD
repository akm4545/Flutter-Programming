# **서버와 연동하기(상태 관리, 캐시와 긍정적 응답)**  
# **프로젝트 구상하기**  
현재는 데이터가 모두 드리프트와 연동되어 있다. 앱의 데이터 흐름과 UI는 모두 작성되어 있으니 18장에서 구현한 앱에서 드리프트 
관련 코드를 하나씩 서버와 연동하는 코드로 변경해나가는 방식으로 앱 기능을 그대로 유지하면서 REST API와 연동한다.  
  
서비스에서 유저의 이탈을 막으려면 앱의 작동이 빨라야 한다. 상태 관리와 캐싱을 사용해서 네트워크 요청이 빠르게 이루어진 
것처럼 보이게 한다.  
  
# **사전 지식**  
# **상태 관리**  
상태 관리를 영어로 State Management라고 부른다. 거창하게 들릴 수 있지만 지금까지 여러 프로젝트를 진행하면서 무의식적으로
StatefulWidget의 setState() 함수를 호출할 떄마다 상태 관리를 사용해왔다. 상태 관리에서의 상태는 데이터를 의미하니 
상태 관리는 결국 데이터 관리이다. 지금까지는 State 클래스 내부에서 데이터를 변경하고 setState() 함수를 실행했다. 
이 방식은 작은 프로젝트에서는 아주 효율적이다. 하지만 프로젝트가 커지면 커질수록 같은 변수를 반복적으로 서브 위젯으로 
넘겨줘야 하니 데이터 관리가 어렵다.  
  
![img.png](image/img.png)  
  
위의 그림에서 최상위 부모 Container에서 최하단에 있는 Text 위젯까지 Colors.blue라는 값을 넘겨주려면 모든 중간 위젯이 
Colors.blue 값을 들고 있어야 한다. 이는 프로젝트가 커지고 협업할 엔지니어가 많아질수록 문제가 된다. 혹여나 매개변수가 
변경이라도 된다면 작은 수정이 대형 공사로 이어질 수도 있다. 그래서 대부분의 프론트엔드 프로젝트에서는 글로벌 상태 관리 
툴이라는 걸 사용한다. 초보에서 중수로 넘어가는 과정에서 가장 어렵고 이해하기 어려운 지식이다. 하지만 한 번 이해하고 나면 
데이터를 최상위 위젯에서 목표 위젯까지의 모든 위젯들에 전달할 필요 없이 목표 위젯에서 직접적으로 데이터를 가져올 수 있는 
이점을 누릴 수 있다.  
  
다음 그림에서는 최상위 부모 Container에서 최하단 Text 위젯까지 Colors.blue라는 값을 넘겨줄 때 더는 중간 위젯들에 
변수를 지속적으로 넘겨주지 않는다. 글로벌로 상태를 관리해 가능한 일이다.  
  
![img.png](image/img2.png)  
  
플러터에는 BloC, GetX, 리버팟(Riverpod), 프로바이더(Provider) 같은 상태 관리 플러그인이 있다. 이중 가장 사용하기 쉬운 
프로바이더를 사용한다.  
  
